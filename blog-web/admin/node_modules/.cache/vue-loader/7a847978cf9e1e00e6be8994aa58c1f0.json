{"remainingRequest":"/home/autwind/Desktop/autwind/blog-web/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/autwind/Desktop/autwind/blog-web/admin/src/views/comment/Comment.vue?vue&type=style&index=0&id=4d75ac30&scoped=true&lang=css&","dependencies":[{"path":"/home/autwind/Desktop/autwind/blog-web/admin/src/views/comment/Comment.vue","mtime":1619260970129},{"path":"/home/autwind/Desktop/autwind/blog-web/admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/autwind/Desktop/autwind/blog-web/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/autwind/Desktop/autwind/blog-web/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/autwind/Desktop/autwind/blog-web/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/autwind/Desktop/autwind/blog-web/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbW1lbnQtY29udGVudCB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9Cg=="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/views/comment","sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <!-- 表格操作 -->\n    <div class=\"operation-container\">\n    </div>\n    <!-- 表格展示 -->\n    <el-table border :data=\"commentList\" @selection-change=\"selectionChange\">\n      <!-- 表格列 -->\n      <el-table-column type=\"selection\" width=\"55\" />\n      \n      <!-- 评论人昵称 -->\n      <el-table-column\n        prop=\"nickName\"\n        label=\"评论人\"\n        align=\"center\"\n        width=\"120\"\n      />\n      \n      <!-- 评论文章标题 -->\n      <el-table-column prop=\"blogTitle\" label=\"文章标题\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"scope.row.blogTitle\">\n            {{ scope.row.blogTitle }}\n          </span>\n          <span v-else>无</span>\n        </template>\n      </el-table-column>\n      <!-- 被评论的内容 -->\n      <el-table-column prop=\"parentContent\" label=\"被评论的内容\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span v-html=\"scope.row.parentContent\" class=\"comment-content\" />\n        </template>\n      </el-table-column>\n      <!-- 评论内容 -->\n      <el-table-column prop=\"commentContent\" label=\"评论内容\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span v-html=\"scope.row.commentContent\" class=\"comment-content\" />\n        </template>\n      </el-table-column>\n      \n      <!-- 评论时间 -->\n      <el-table-column\n        prop=\"createTime\"\n        label=\"评论时间\"\n        width=\"150\"\n        align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <i class=\"el-icon-time\" style=\"margin-right:5px\" />\n          {{ scope.row.createTime | date }}\n        </template>\n      </el-table-column>\n      \n      <el-table-column label=\"操作\" align=\"center\" width=\"160\">\n        <template slot-scope=\"scope\">\n          <el-popconfirm\n            title=\"确定删除吗？\"\n            style=\"margin-left:1rem\"\n            @onConfirm=\"deleteComments(scope.row.id)\"\n          >\n            <el-button size=\"mini\" type=\"danger\" slot=\"reference\">\n              删除\n            </el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 分页 -->\n    <el-pagination\n      class=\"pagination-container\"\n      background\n      @size-change=\"sizeChange\"\n      @current-change=\"currentChange\"\n      :current-page=\"current\"\n      :page-size=\"size\"\n      :total=\"count\"\n      :page-sizes=\"[10, 20]\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n    />\n  </el-card>\n</template>\n\n<script>\nexport default {\n  created() {\n    this.listComments();\n  },\n  data: function() {\n    return {\n      remove: false,\n      updateIsDelete: false,\n      options: [\n        {\n          value: 0,\n          label: \"正常\"\n        },\n        {\n          value: 1,\n          label: \"回收站\"\n        }\n      ],\n      commentList: [],\n      commentIdList: [],\n      keywords: null,\n      isDelete: 0,\n      current: 1,\n      size: 10,\n      count: 0\n    };\n  },\n  methods: {\n    selectionChange(commentList) {\n      this.commentIdList = [];\n      commentList.forEach(item => {\n        this.commentIdList.push(item.id);\n      });\n    },\n    sizeChange(size) {\n      this.size = size;\n      this.listComments();\n    },\n    currentChange(current) {\n      this.current = current;\n      this.listComments();\n    },\n    updateCommentStatus(id) {\n      let param = new URLSearchParams();\n      if (id != null) {\n        param.append(\"idList\", [id]);\n      } else {\n        param.append(\"idList\", this.commentIdList);\n      }\n      param.append(\"isDelete\", this.isDelete == 0 ? 1 : 0);\n      this.axios.put(\"/api/admin/comments\", param).then(({ data }) => {\n        if (data.flag) {\n          this.$notify.success({\n            title: \"成功\",\n            message: data.message\n          });\n          this.listComments();\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: data.message\n          });\n        }\n        this.updateIsDelete = false;\n      });\n    },\n    deleteComments(id) {\n      this.$http.delete(\"/comment/\"+id).then(({ data }) => {\n        if (data.code == 1) {\n          this.$notify.success({\n            title: \"成功\",\n            message: data.message\n          });\n          this.listComments();\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: data.message\n          });\n        }\n        this.remove = false;\n      });\n    },\n    listComments() {\n      this.$http\n        .get(\"/comment\", {\n          params: {\n            current: this.current,\n            size: this.size,\n          }\n        })\n        .then(({ data }) => {\n          this.commentList = data.data;\n          this.count = data.data.length;\n        });\n    }\n  },\n  watch: {\n    isDelete() {\n      this.listComments();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.comment-content {\n  display: inline-block;\n}\n</style>"]}]}